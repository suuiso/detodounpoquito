<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Test Menú Móvil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
        }
        
        #mobile-menu {
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        
        #mobile-menu.show {
            transform: translateX(0);
        }
        
        body.no-scroll {
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100%;
        }
        
        .debug-info {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            font-size: 12px;
            z-index: 99999;
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Header -->
    <header class="bg-white shadow-md p-4 flex justify-between items-center">
        <h1 class="text-xl font-bold text-pink-500">Test Menú Móvil</h1>
        <button id="menu-btn" class="p-2 bg-pink-500 text-white rounded">
            <span id="menu-icon">☰</span>
        </button>
    </header>

    <!-- Overlay -->
    <div id="overlay" class="fixed inset-0 bg-black/50 opacity-0 pointer-events-none transition-opacity" style="z-index: 999;"></div>

    <!-- Menú Móvil -->
    <div id="mobile-menu" class="fixed top-0 right-0 w-4/5 max-w-sm h-full bg-white shadow-2xl" style="z-index: 1000;">
        <div class="p-8">
            <h2 class="text-2xl font-bold mb-4">Menú</h2>
            <nav class="flex flex-col space-y-4">
                <a href="#" class="p-3 hover:bg-gray-100 rounded">Opción 1</a>
                <a href="#" class="p-3 hover:bg-gray-100 rounded">Opción 2</a>
                <a href="#" class="p-3 hover:bg-gray-100 rounded">Opción 3</a>
                <a href="#" class="p-3 hover:bg-gray-100 rounded">Opción 4</a>
            </nav>
        </div>
    </div>

    <!-- Contenido -->
    <main class="p-8">
        <h2 class="text-2xl font-bold mb-4">Test de Menú Móvil</h2>
        <p class="mb-4">Haz click en el botón ☰ en la esquina superior derecha para abrir el menú.</p>
        <div class="space-y-2 text-sm">
            <p>✅ El menú debe deslizarse desde la derecha</p>
            <p>✅ Debe aparecer un overlay oscuro</p>
            <p>✅ El scroll debe bloquearse</p>
            <p>✅ Click en overlay debe cerrar el menú</p>
        </div>
    </main>

    <!-- Debug Info -->
    <div id="debug" class="debug-info"></div>

    <script>
        const menuBtn = document.getElementById('menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const overlay = document.getElementById('overlay');
        const body = document.body;
        const debug = document.getElementById('debug');
        const menuIcon = document.getElementById('menu-icon');
        
        let menuOpen = false;
        let touchCount = 0;
        let clickCount = 0;

        function updateDebug() {
            debug.innerHTML = `
                Estado: ${menuOpen ? 'ABIERTO' : 'CERRADO'} | 
                Clicks: ${clickCount} | 
                Touches: ${touchCount} | 
                Ancho: ${window.innerWidth}px | 
                Alto: ${window.innerHeight}px
            `;
        }

        function openMenu() {
            console.log('openMenu called');
            menuOpen = true;
            mobileMenu.classList.add('show');
            overlay.classList.remove('pointer-events-none', 'opacity-0');
            overlay.classList.add('opacity-100');
            body.classList.add('no-scroll');
            menuIcon.textContent = '✕';
            updateDebug();
        }

        function closeMenu() {
            console.log('closeMenu called');
            menuOpen = false;
            mobileMenu.classList.remove('show');
            overlay.classList.add('pointer-events-none', 'opacity-0');
            overlay.classList.remove('opacity-100');
            body.classList.remove('no-scroll');
            menuIcon.textContent = '☰';
            updateDebug();
        }

        function toggleMenu() {
            console.log('toggleMenu called, current state:', menuOpen);
            if (menuOpen) {
                closeMenu();
            } else {
                openMenu();
            }
        }

        // Click event
        menuBtn.addEventListener('click', (e) => {
            e.preventDefault();
            clickCount++;
            console.log('Button clicked');
            toggleMenu();
        });

        // Touch event (para móviles)
        menuBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            touchCount++;
            console.log('Button touched');
            toggleMenu();
        }, { passive: false });

        // Cerrar con overlay
        overlay.addEventListener('click', closeMenu);
        
        // Cerrar con enlaces
        const links = mobileMenu.querySelectorAll('a');
        links.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                closeMenu();
            });
        });

        // Cerrar con ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && menuOpen) {
                closeMenu();
            }
        });

        // Actualizar debug al cargar
        updateDebug();
        
        // Log inicial
        console.log('Script cargado correctamente');
        console.log('Botón encontrado:', menuBtn ? 'SÍ' : 'NO');
        console.log('Menú encontrado:', mobileMenu ? 'SÍ' : 'NO');
        console.log('Overlay encontrado:', overlay ? 'SÍ' : 'NO');
    </script>
</body>
</html>
